#如何解决日100w订单数据请求

### 需求：解决每天100w订单数据
* mysql每天订单100w数据
* 每天50w-100w活跃账户(100w/2-100w/1)(按照每人两单的计算)
* api接口每天承载3000w的pv请求量(50w*30-100w*30)(10为单个app请求接口数量)

### 总结分析
1. mysql(master)承载日100w次写io
2. nginx&php承载日5000w请求量  需要承载并发 2500(QPS)

`注`:按照大宗标准的每天的80%的流量聚集在20%的时间内发生(5000w*80%/(24*3600*20%))

### Api/Web优化思路

######  业务优化
* 业务梳理，尽量简洁化
* 尽可能复用，避免造轮子

######  框架优化 
* 分模块开发(后期便于分离，单独部署)
* 尽可能解耦 后期升级扩展也是萌萌哒
* DB避免链表查询，数据组合尽量在业务层
* read query 尽量从slave服务器执行，避免给master增加压力。如果主从不一致，应致力解决主从延迟问题。而不是直接读master
* 缓存一定要做好(memcached/redis/ssdb合理运用)，达到高效查询&分担db压力
* 队列合理运用，异步处理。高效执行
* php应用只要写的不是太垃圾，瓶颈基本都聚焦在db这一块。优化好db。如果追求极致可以用yaf/phalcon这些框架

### php集群方案
1. asd
2. asd
3. 

### php集群对比
###### ---方案1---
优点
项目无需分离，直接部署
缺点
定位问题无法局部化，需要全部排除问题
应用无隔离，相对不安全

###### ---方案2---
优点
模块分离，特定模块从处理特定需求
缺点
前期投入相对多的精力做应用规划隔离